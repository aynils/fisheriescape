{% extends 'trapnet/form.html' %}

{% load bootstrap4 %}
{% load i18n %}
{% load custom_tags %}


{% block form_fields %}

  <div class="card info-card mb-5">
    <div class="card-header bg-primary text-light">
      <h4 class="card-title">
        {% trans "General" %}
      </h4>
    </div>
    <div class="card-body">
      {% bootstrap_field form.site placeholder="" %}
      {% bootstrap_field form.monitoring_program placeholder="" %}
      <div class="row">
        <div class="col">
          {% bootstrap_field form.arrival_date placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.departure_date placeholder="" %}
        </div>
      </div>
      {% bootstrap_field form.sample_type placeholder="" %}
      {% if not object.sample_type %}
        <div class="red-font mb-4">
          {% blocktrans %}
            Certain field will only open up after a sample type has been selected. Click
            <button id="save" type="button" class="btn btn-sm btn-link px-0">here</button> to save and continue editing.
          {% endblocktrans %}
        </div>
      {% endif %}

      <div class="row">
        <div class="col">
          {% bootstrap_field form.air_temp_arrival placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.min_air_temp placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.max_air_temp placeholder="" %}
        </div>
      </div>
      <div class="row">
        <div class="col">
          {% bootstrap_field form.water_temp_c placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.percent_cloud_cover placeholder="" %}
        </div>
      </div>
      <div class="row">
        <div class="col">
          {% bootstrap_field form.precipitation_category placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.precipitation_comment placeholder="" %}
        </div>
      </div>
      <div class="row">
        <div class="col">
          {% bootstrap_field form.wind_speed placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.wind_direction placeholder="" %}
        </div>
      </div>
      {% bootstrap_field form.notes placeholder="" %}

      <div class="row">
        <div class="col">
          {% bootstrap_field form.age_thresh_0_1 placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.age_thresh_1_2 placeholder="" %}
        </div>
        <div class="col">
          {% bootstrap_field form.age_thresh_parr_smolt placeholder="" %}
        </div>
      </div>
    </div>
  </div>

  {% block more_fields %}{% endblock %}


  {% bootstrap_field form.stay_on_page %}


{% endblock %}


{% block body_js %}
  <script type="application/javascript">
  $("#save").click(function () {
    $("#id_stay_on_page").val(1);
    $("form").submit();
  });

  $("#id_arrival_date").change(function () {
    var startDate = $(this).val();
    if (startDate != null) {
      $("#id_departure_date").val(startDate);
    }
  });

  </script>
{% endblock %}