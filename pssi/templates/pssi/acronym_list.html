<title>PSSI - Pacific Salmon Data Hub</title>

{% extends "pssi/base.html" %} <!-- Extention of base.html page -->
{% load bootstrap4 %}
{% load i18n %}
{% load custom_filters %}
{% load custom_tags %}
{% load el_pagination_tags %}
{% load verbose_names %}


<!-- 
    Purpose: Display list of Acronyms used in the Data Assets
    Input: Requires the acronyms used in the Acronym Excel Sheet
    Output: Displays the acronyms in an organised format.
 -->

{% block subcontent %}
<!-- Styling for elements in the page -->
<style>
  .categories {
    margin: auto;
  }

  .description {
    font-size: large;
  }

  .tagFilter {
    position:absolute;
    right: 40%;
    width: 20%;
  }

  .buttonList {
    padding-bottom: 2%;
    left: 50%;
    transform: translate(-50%, 0%);
  }

  .btn:hover {
    background-color: white;
    color: black;
  }

  .feature-icon {
    width: 4rem;
    height: 4rem;
    border-radius: .75rem;
  }

  .px-10 {
    padding-right: 10rem !important;
    padding-left: 10rem !important;
  }

  .letterAnchor {
    text-decoration: underline;
    font-weight: bold;
  }

  .line {
    display: flex;
  }

  td {
    padding-bottom: 20px;
  }

  .term {
    font-size: large;
    width: 30%;
  }

  .description {
    float: left;
    padding-left: 10px;
    width: 200%;
  }
</style>

<div style="color:red; font-weight: bold;"><center>This page is under development and the data maybe not complete or accurate.</center></div>

<!-- Variable with alphabet and numbers to iterate through -->
{% with categories="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789" %}

<div class="container">

    <!-- Buttons to jump to Page Anchors -->
    <div class="form btn-group buttonList" id="buttonsNumbers" role="group" aria-label="Basic example"></div>
    <div class="form btn-group buttonList" id="buttonsLetters" role="group" aria-label="Basic example"></div>

    <!-- Filter dropdown to filter Acronyms within a specific catagory -->
    <div class="col" style="text-align: right;">
        <div class="form-group tagFilter">
            <select name="tag" class="form-control form-control-sm " title="" id="id_tag">
                <option value="" selected>Filter by Tag</option>
            </select>
        </div>
    </div>

    <hr noshade>

    <!-- Area that displays the acronyms within catagories based on its first letter -->
    <div id="categories"></div>

</div>

    <!-- Loops through each letter/character in Catagories variable to create sections -->
    {% for category in categories %}

    <div class="container py-5 px-10" id="{{category}}">
        <!-- Title of Catagory -->
        <h1 class="letterAnchor">{{category}}</h1>

        <!-- Table where the list of acronyms are going to be in -->
        <table class="container py-2 px-10 line">
        {% for object in list %}
            <!-- Goes through each acronym and checks if its first character is that specific character -->
            {% if object.acronym_letters|first|upper == category %}
                {% block table_tr %}        
                <tr>
                    <!-- If so, then gets all the fields -->
                    {% for field in field_list %}
                        <!-- Add any styling for specific class -->
                        <td class="{{field.class}}">
                        {% block table_td %}
                            <!-- Checks if theres a source/link for acronym -->
                            {% if field.name == "acronym_Letters" and object.acronym_URL != null %}

                            <!-- 
                                1. NOT EVERY ACRONYM IS IN UPPERCASE. PLEASE VERIFY. 
                                2. IF NOT EXISTS, DO NOT SHOW EMPTY SECTIONS.
                            -->
                                <!-- If so, make acronym a hyperlink that contains the link to its source -->
                                <a href="{{object.acronym_URL}}">{% get_field_value object field.name safe=True %}</a>
                            {% else %}
                                <!-- If not, then display the acronym normally -->
                                {% get_field_value object field.name safe=True %}
                            {% endif %}
                        {% endblock %}
                        </td>
                    
                    {% endfor %}
                </tr>
                {% endblock %}
            {% endif %}
        {% endfor %}
        </table>
    </div>
    <hr width="80%;"/>

    {% endfor %}

<!-- Javascript for page anchor buttons -->
<script>
    let categories = '{{categories}}';
  
    // Page Anchor function which jumps to letter catagory
    function jump(letter){
        var top = document.getElementById(letter).offsetTop;
        console.log(top);
        window.scrollTo(0, top);
        // input for this scrollTo are NUMBERS - LETTERS won't work. PLEASE FIX.
    }
  
    // Create page anchor buttons
    let buttonNum = "";
    for (let letter of categories.slice(0, 26)) {
        buttonNum += '<button type="button" onclick="jump(\'' + letter + '\')" class="btn btn-secondary">' + letter + '</button>';
    }

    let buttonLet = "";
    for (let letter of categories.slice(26)) {
        buttonLet += '<button type="button" onclick="jump(\'' + letter + '\')" class="btn btn-secondary">' + letter + '</button>';
    }

    document.getElementById("buttonsLetters").innerHTML = buttonLet;
    document.getElementById("buttonsNumbers").innerHTML = buttonNum;
</script>

{% endwith %}
{% endblock %}