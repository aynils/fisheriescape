{% load verbose_names %}
{% load i18n %}
{% load static %}
{% get_current_language as LANG %}

<div class="mb-5 w-90">
  <div class="mb-3">
    <h4>{% trans "Basic Detail" %}</h4>
  </div>

  <table class="table table-sm small">
    <tr>
      <th class="w-25">{% trans "External Links" %}</th>
      <td>

        <div>
          {% if object.fgp_url %}
            <a class="stop-blank mx-1" href="{{ object.fgp_url }}" data-toggle="tooltip"
               title="Open URL in the Federal Geospatial Platform">
              <img src="{% static 'img/icons/fgp.png' %}" alt="" width="40px">
            </a>
          {% endif %}
          {% if object.public_url %}
            <a class="stop-blank mx-1" href="{{ object.public_url }}" data-toggle="tooltip"
               title="Open URL in the Open Government Portal">
              <img src="{% static 'img/icons/canada.png' %}" alt="" width="40px">
            </a>
          {% endif %}
        </div>


      </td>
    </tr>
    {% if LANG == 'fr' %}
      {% verbose_td_display object "title_fre" %}
      {% verbose_td_display object "descr_fre" to_html=True %}
      {% verbose_td_display object "purpose_fre" to_html=True %}

    {% else %}
      {% verbose_td_display object "title_eng" %}
      {% verbose_td_display object "descr_eng" to_html=True %}
      {% verbose_td_display object "purpose_eng" to_html=True %}
    {% endif %}

    {% verbose_td_display object "resource_type" %}
    {% verbose_td_display object "section" %}
    {% verbose_td_display object "status" %}
    {% verbose_td_display object "time_period|time period" %}
    {% verbose_td_display object "storage_envr_notes" to_html=True %}
    {% verbose_td_display object "notes" to_html=True %}
    {#  {% verbose_td_display object "fgp_url" url=True %}#}
    {#  {% verbose_td_display object "public_url" url=True %}#}
    {% verbose_td_display object "fgp_publication_date" %}
    {% verbose_td_display object "od_publication_date" %}
    {% verbose_td_display object "last_revision_date" %}

    <tr>
      <th>{% trans "Parent record" %}</th>
      <td>
        {% if object.parent.id %}
          <a href="{% url 'inventory:resource_detail' object.parent.id %}">
            {{ object.parent.t_title }} ({{ object.parent.uuid }})
          </a>&nbsp;
        {% else %}
          <em>n/a</em>
        {% endif %}
      </td>
    </tr>

    <tr>
      <th>{% trans "Child records" %}</th>
      <td>
        <ul>

          {% for item in object.children.all %}
            <li class="mb-1">
              <a href="{% url 'inventory:resource_detail' item.id %}">
                {{ item.t_title }} ({{ item.uuid }})
              </a>
            </li>
          {% empty %}
            <em>n/a</em>
          {% endfor %}
        </ul>
      </td>
    </tr>
    <tr>
      <th style="width: 150px">Last modified</th>
      <td>
        {{ object.last_modified_by }}
      </td>
    </tr>


  </table>

</div>
