# Generated by Django 3.2.14 on 2023-01-11 15:40

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('shared_models', '0035_auto_20221207_1558'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('inventory', '0007_alter_resourcecertification_certification_date'),
    ]

    operations = [
        migrations.CreateModel(
            name='StorageSolution',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
            ],
            options={
                'ordering': ['name'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='DMA',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('status', models.IntegerField(choices=[(0, 'Unevaluated'), (1, 'On-track'), (2, 'Complete'), (3, 'Encountering issues'), (4, 'Aborted / cancelled'), (5, 'Pending new evaluation')], default=3, editable=False)),
                ('title', models.CharField(help_text='What is the title of the Data Management Agreement?', max_length=1000, verbose_name='Title')),
                ('data_contact_text', models.CharField(blank=True, help_text='i.e., who is the primary responsible party?', max_length=500, null=True, verbose_name='Who is the principal steward of this data?')),
                ('metadata_contact_text', models.CharField(blank=True, help_text='i.e., who is responsible for keeping metadata records up-to-date?', max_length=500, null=True, verbose_name='Who is responsible for creating and maintaining the metadata?')),
                ('metadata_tool', models.TextField(blank=True, help_text='e.g., Metadata Inventory app in DM Apps, DFO Enterprise Data Hub, Federal Geospatial Portal, stand-alone file, ...', null=True, verbose_name='Describe the tools or processes that will be used to create metadata')),
                ('metadata_url', models.CharField(blank=True, help_text='Full link to any metadata records available online, if applicable', max_length=1000, null=True, verbose_name='Please provide any URLs to the metadata')),
                ('metadata_update_freq', models.IntegerField(blank=True, choices=[(1, 'Daily'), (2, 'Weekly'), (3, 'Monthly'), (4, 'Annually'), (5, 'Irregular / as needed'), (9, 'Other')], help_text='What should be the expectation for how often the metadata is updated?', null=True, verbose_name='At what frequency should the metadata be updated? ')),
                ('metadata_freq_text', models.TextField(blank=True, help_text='What justification can be provided for the above selection?', null=True, verbose_name='Justification for frequency:')),
                ('storage_solution_text', models.TextField(blank=True, help_text='Provide your rational for the selection(s) made above.', null=True, verbose_name='Justification for selection of storage solution(s)')),
                ('storage_needed', models.TextField(blank=True, help_text='This includes raw field data, processed data, and all other data products etc.)', null=True, verbose_name='What is the estimated storage space needed for the above?')),
                ('raw_data_retention', models.TextField(blank=True, help_text='This would include instrument data, field sheets, physical samples etc. Please refer to the DFO EOS Retention Policy for clarification)', null=True, verbose_name='What is the retention policy for the raw field data?')),
                ('data_retention', models.TextField(blank=True, help_text='Please refer to the DFO EOS Retention Policy for clarification.', null=True, verbose_name='What is the retention policy for the data?')),
                ('backup_plan', models.TextField(blank=True, null=True, verbose_name='What procedures will be taken to back-up/secure the data?')),
                ('cloud_costs', models.TextField(blank=True, help_text="e.g., cloud storage is estimated at $1000/yr and will be paid for under the the division manager's budget", null=True, verbose_name='If using cloud storage, what is the estimated annual cost and who will be covering the cost? ')),
                ('had_sharing_agreements', models.BooleanField(choices=[(True, 'Yes'), (False, 'No')], default=False, verbose_name='Is the dataset subject to a data sharing agreement, MOU, etc.?')),
                ('sharing_agreements_text', models.TextField(blank=True, help_text='please provide the name of the organization and the primary contact for each agreement.', null=True, verbose_name='If yes, who are the counterparts for the agreement(s)?')),
                ('publication_timeframe', models.TextField(blank=True, help_text='The answer provided will set the expectation for the open data publication frequency', null=True, verbose_name='How soon after data collection will data be made available?')),
                ('publishing_platforms', models.TextField(blank=True, help_text="The best option is the Government of Canada's Open Data Platform however other platforms / publications are acceptable provided they are freely available to the general public.", null=True, verbose_name='Which open data publishing mechanism(s) will be used?')),
                ('comments', models.TextField(blank=True, null=True, verbose_name='Additional comments to take into consideration (if applicable):')),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='inventorydmas_created_by', to=settings.AUTH_USER_MODEL)),
                ('data_contact', models.ForeignKey(blank=True, editable=False, help_text='i.e., who is the primary responsible party?', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='data_contact_for_dmas', to=settings.AUTH_USER_MODEL, verbose_name='Who is the principal steward of this data?')),
                ('metadata_contact', models.ForeignKey(blank=True, editable=False, help_text='i.e., who is responsible for keeping metadata records up-to-date?', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='metadata_contact_for_dmas', to=settings.AUTH_USER_MODEL, verbose_name='Who is responsible for creating and maintaining the metadata?')),
                ('section', models.ForeignKey(null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='dmas', to='shared_models.section')),
                ('storage_solutions', models.ManyToManyField(blank=True, to='inventory.StorageSolution', verbose_name='Which storage solution(s) will be used to house the raw field data, processed data, and all other data products?')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='inventorydmas_updated_by', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Data Management Agreement',
                'ordering': ['section__division__branch__sector__region', 'section__division', 'section', 'title'],
            },
        ),
        migrations.CreateModel(
            name='DMAReview',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('decision', models.IntegerField(choices=[(0, 'Unevaluated'), (1, 'Compliant'), (2, 'Non-compliant')], default=0)),
                ('is_final_review', models.BooleanField(default=False, help_text='If so, please make sure to provide an explanation in the comments field.', verbose_name='Will this be the final review of this agreement?')),
                ('comments', models.TextField(blank=True, null=True, verbose_name='comments')),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='inventorydmareviews_created_by', to=settings.AUTH_USER_MODEL)),
                ('dma', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='inventory.dma')),
                ('fiscal_year', models.ForeignKey(default=2023, on_delete=django.db.models.deletion.DO_NOTHING, related_name='inventory_dma_reviews', to='shared_models.fiscalyear')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='inventorydmareviews_updated_by', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['fiscal_year', '-created_at'],
                'unique_together': {('dma', 'fiscal_year')},
            },
        ),
    ]
