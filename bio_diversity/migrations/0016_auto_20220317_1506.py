# Generated by Django 3.2.10 on 2022-03-17 18:06

import datetime
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('bio_diversity', '0015_alter_feeding_unique_together'),
    ]

    operations = [
        migrations.AddField(
            model_name='biouser',
            name='facic_id',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='bio_diversity.facilitycode', verbose_name='Facility'),
        ),
        migrations.AddField(
            model_name='biouser',
            name='mode',
            field=models.IntegerField(choices=[(1, 'read'), (2, 'edit')], default=1),
        ),
        migrations.AddField(
            model_name='count',
            name='anix_id',
            field=models.ForeignKey(blank=True, db_column='ANI_DET_XREF_ID', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='counts', to='bio_diversity.anidetailxref', verbose_name='Animal Cross Reference'),
        ),
        migrations.AddField(
            model_name='count',
            name='cnt_date',
            field=models.DateField(default=datetime.date(1, 1, 1), verbose_name='Count Date'),
        ),
        migrations.AddField(
            model_name='count',
            name='contx_ref',
            field=models.ForeignKey(blank=True, db_column='CONT_XREF_ID', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='counts', to='bio_diversity.containerxref', verbose_name='Container Reference'),
        ),
        migrations.AddField(
            model_name='group',
            name='grp_end_date',
            field=models.DateField(blank=True, db_column='GROUP_END_DATE', null=True, verbose_name='Group end date'),
        ),
        migrations.AlterUniqueTogether(
            name='count',
            unique_together={('loc_id', 'anix_id', 'cntc_id', 'contx_ref', 'spec_id', 'cnt_year', 'coll_id', 'stok_id', 'cnt_date')},
        ),
        migrations.CreateModel(
            name='MoveDet',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_by', models.CharField(max_length=32, verbose_name='Created By')),
                ('created_date', models.DateField(verbose_name='Created Date')),
                ('move_date', models.DateField(db_column='MOVE_DATE', verbose_name='Date move was recorded')),
                ('anix_id', models.ForeignKey(blank=True, db_column='ANI_DET_X_REF_ID', null=True, on_delete=django.db.models.deletion.CASCADE, to='bio_diversity.anidetailxref', verbose_name='Animal Detail X Ref')),
                ('contx_end', models.ForeignKey(blank=True, db_column='CONTAINER_XREF_END_ID', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='move_end', to='bio_diversity.containerxref', verbose_name='Container Cross Reference End')),
                ('contx_start', models.ForeignKey(blank=True, db_column='CONTAINER_XREF_START_ID', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='move_start', to='bio_diversity.containerxref', verbose_name='Container Cross Reference')),
            ],
        ),
        migrations.RemoveField(
            model_name='count',
            name='contx_id',
        ),
        migrations.AddConstraint(
            model_name='movedet',
            constraint=models.UniqueConstraint(fields=('anix_id', 'contx_start', 'contx_end', 'move_date'), name='Move_Detail_Uniqueness'),
        ),
    ]
